<?xml version="1.0" encoding="UTF-8"?>
<window>
    <defaultcontrol>-</defaultcontrol>
    <allowoverlay>no</allowoverlay>
    
    <controls>
        <!-- Fanart Background - Imagem dinâmica via propriedade -->
        <control type="image">
            <posx>0</posx>
            <posy>0</posy>
            <width>1920</width>
            <height>1080</height>
            <texture>$INFO[Window(Home).Property(loading.fanart)]</texture>
            <aspectratio>scale</aspectratio>
            <fadetime>200</fadetime>
        </control>
        
        <!-- Overlay cinza transparente -->
        <control type="image">
            <posx>0</posx>
            <posy>0</posy>
            <width>1920</width>
            <height>1080</height>
            <texture colordiffuse="CC000000">white.png</texture>
            <fadetime>200</fadetime>
        </control>
        
        <!-- Container central -->
        <control type="group">
            <posx>660</posx>
            <posy>450</posy>
            <width>600</width>
            <height>180</height>
            
            <!-- Barra de progresso - Atualizada via código com setPercent() -->
            <control type="progress" id="100">
                <posx>0</posx>
                <posy>0</posy>
                <width>600</width>
                <height>30</height>
                
                <!-- Fundo da barra (cinza transparente) -->
                <texturebg colordiffuse="33FFFFFF">white.png</texturebg>
                
                <!-- Barra preenchida (azul claro) -->
                <lefttexture></lefttexture>
                <midtexture colordiffuse="FF00D4FF">white.png</midtexture>
                <righttexture></righttexture>
                
                <visible>true</visible>
            </control>
            
            <!-- FASE 1: Texto "Searching at the source" -->
            <control type="label">
                <posx>0</posx>
                <posy>50</posy>
                <width>600</width>
                <height>40</height>
                <align>center</align>
                <aligny>center</aligny>
                <font>font13</font>
                <textcolor>FFFFFFFF</textcolor>
                <label>$ADDON[plugin.video.kingiptv 32030]</label>
                <shadowcolor>FF000000</shadowcolor>
                <visible>String.IsEmpty(Window(Home).Property(loading.phase2))</visible>
            </control>
            
            <!-- FASE 2: Texto "Resolving the link" -->
            <control type="label">
                <posx>0</posx>
                <posy>50</posy>
                <width>600</width>
                <height>40</height>
                <align>center</align>
                <aligny>center</aligny>
                <font>font13</font>
                <textcolor>FFFFFFFF</textcolor>
                <label>$ADDON[plugin.video.kingiptv 32031]</label>
                <shadowcolor>FF000000</shadowcolor>
                <visible>!String.IsEmpty(Window(Home).Property(loading.phase2))</visible>
            </control>
        </control>
    </controls>
</window>
